require 'fb_graph'

class UsersController < ApplicationController
  before_filter :dump

  def dump
    @params = params
  end
  
  def index
    face = FbGraph::Auth.new '199434696776148', '6c34f288c3ff35cd8e53993a4d5a9a9b', :redirect_uri => 'http://localhost:3000/users/show'
    client = face.client
    redirect_to client.authorization_uri
  end

  def show
    client =  FbGraph::Auth.new '199434696776148', '6c34f288c3ff35cd8e53993a4d5a9a9b', :redirect_uri => 'http://localhost:3000/users/show'
    client.authorization_code = params[:code]
    access_token = client.access_token! :client_auth_body
    @user = FbGraph::User.me(access_token).fetch
  end
end
