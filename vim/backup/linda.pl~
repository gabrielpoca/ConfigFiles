%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% SIST. REPR. CONHECIMENTO E RACIOCINIO - LEI/3

%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% SEMANA 12: 16.MAI.2011 - 20.MAI.2011

%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% Distribuicao da Computacao - LINDA

%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% Carregamento das bibliotecas

:- use_module( library( 'system' ) ).
:- use_module( library( 'linda/client' ) ).


:- set_prolog_flag( single_var_warnings,off ).

:- linda_client('ggp-mbp.home':'57188').
:- linda_timeout(2, 2).

%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% Predicado especialista no calculo da SOMATORIO

somatorio :-
              write( 'Esperando um pedido de SOMATORIO.' ),nl,
    in( pedido( somatorio ) ),
              write( 'SOMATORIO em actividade...' ),nl,
    bagof_rd_noblock( X,n( X ),L ),
    somatorio( L,S ),
    out( resultado( somatorio,S ) ),
              sleep(1), write( '... actividade concluida!' ),nl,
    somatorio.

somatorio( [],0 ).
somatorio( [X|R],S ) :-
    somatorio( R,S1 ),
    S is S1+X.

%--------------------------------- - - - - - - - - - -  -  -  -  -   -
% Consulta do estado do QUADRO NEGRO

qn( L ) :-
    bagof_rd_noblock( X,X,L ).


limpar :-
	in_noblock(X),
	limpar.
